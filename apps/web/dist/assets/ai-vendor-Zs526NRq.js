const r={WEB:{path:"/models/gemma-2b-it-q4_k_m.gguf"},MOBILE:{path:"/models/phi-3-mini-4k-instruct-q4.onnx"}},w="peer_learning.db";function c(){if(typeof navigator>"u")return"web";const a=navigator.userAgent.toLowerCase();return/android/.test(a)?"android":/iphone|ipad|ipod/.test(a)?"ios":"web"}const d=[{id:"user-1",name:"Rohan Kumar",role:"student",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Rohan",points:1250,streak:12,level:5,masteryScore:78,completedLessons:24,language:"hi",preferences:{language:"hi",notifications:!0,offlineMode:!1}},{id:"user-2",name:"Test Student",role:"student",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Test",points:500,streak:3,level:2,masteryScore:60,completedLessons:10,language:"en",preferences:{language:"en",notifications:!0,offlineMode:!0}}],f=d[0],b=[{id:"math-101",title:"Mathematics - Class 10",description:"NCERT based comprehensive math course covering Algebra, Geometry, and Trigonometry.",thumbnail:"https://images.unsplash.com/photo-1635070041078-e363dbe005cb?w=800&q=80",progress:65,totalLessons:40,completedLessons:26,tags:["Math","NCERT","Class 10"]},{id:"sci-101",title:"Science - Class 10",description:"Physics, Chemistry, and Biology fundamentals explained with real-world examples.",thumbnail:"https://images.unsplash.com/photo-1532094349884-543bc11b234d?w=800&q=80",progress:42,totalLessons:35,completedLessons:15,tags:["Science","Physics","Chemistry"]},{id:"hist-101",title:"History - India & World",description:"Explore the rich history of India and significant world events.",thumbnail:"https://images.unsplash.com/photo-1461360370896-922624d12aa1?w=800&q=80",progress:10,totalLessons:20,completedLessons:2,tags:["History","Social Science"]}],S=[{id:"act-1",title:"Quadratic Equations Quiz",type:"quiz",subject:"Mathematics",timestamp:new Date(Date.now()-1e3*60*60*2).toISOString(),score:85,maxScore:100,status:"completed"},{id:"act-2",title:"Light: Reflection & Refraction",type:"lesson",subject:"Science",timestamp:new Date(Date.now()-1e3*60*60*24).toISOString(),progress:100,status:"completed"},{id:"act-3",title:"Nationalism in India",type:"reading",subject:"History",timestamp:new Date(Date.now()-1e3*60*60*48).toISOString(),progress:45,status:"in-progress"}],v=[{id:"badge-1",name:"Early Bird",description:"Completed a lesson before 8 AM",icon:"sunrise",earnedAt:new Date(Date.now()-1e3*60*60*24*5).toISOString(),category:"engagement"},{id:"badge-2",name:"Math Whiz",description:"Scored 100% in 3 Math quizzes",icon:"calculator",earnedAt:new Date(Date.now()-1e3*60*60*24*2).toISOString(),category:"achievement"},{id:"badge-3",name:"Streak Master",description:"Maintained a 7-day learning streak",icon:"flame",earnedAt:null,progress:5,totalRequired:7,category:"consistency"}],I=[{id:"tutor-1",name:"Priya Sharma",specialty:"Mathematics",rating:4.8,reviews:124,isOnline:!0,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Priya"},{id:"tutor-2",name:"Rahul Verma",specialty:"Science",rating:4.5,reviews:89,isOnline:!1,avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed=Rahul"}],O=[{id:"msg-1",senderId:"ai-assistant",text:"Hello Rohan! How can I help you with your studies today?",timestamp:new Date(Date.now()-1e3*60*30).toISOString(),isAi:!0},{id:"msg-2",senderId:"user-1",text:"Can you explain Newton's Third Law?",timestamp:new Date(Date.now()-1e3*60*29).toISOString(),isAi:!1},{id:"msg-3",senderId:"ai-assistant",text:"Certainly! Newton's Third Law states that for every action, there is an equal and opposite reaction. This means that in every interaction, there is a pair of forces acting on the two interacting objects.",timestamp:new Date(Date.now()-1e3*60*28).toISOString(),isAi:!0}];class p{constructor(e=r.WEB.path){Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"modelPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.modelPath=e}async load(){try{console.log(`Loading model from ${this.modelPath}...`),console.log("Model loaded successfully")}catch(e){throw console.error("Failed to load model:",e),e}}async generate(e,t={}){if(!this.context)throw new Error("Model not loaded. Call load() first.");const{maxTokens:n=256,temperature:s=.7,topP:l=.9,stopSequences:u=["</s>",`

`]}=t;try{return console.log("Generating response for prompt:",e.substring(0,50)+"..."),this.simulateResponse(e)}catch(o){throw console.error("Generation failed:",o),o}}async unload(){this.context&&(this.context=null),console.log("Model unloaded")}simulateResponse(e){const t=e.match(/Question: (.+?)(?:\n|$)/),n=t?t[1]:e;return n.toLowerCase().includes("what is")?"Let me explain that concept to you. This is an important topic in your curriculum.":n.toLowerCase().includes("how to")?"Here are the steps to solve this problem: 1) First, understand the question. 2) Identify what you know. 3) Apply the relevant formula or concept.":n.toLowerCase().includes("solve")?"To solve this problem, let's break it down step by step. First, identify the given information, then apply the appropriate method.":"That's a great question! Let me help you understand this better. Can you tell me what you already know about this topic?"}}async function m(a){const e=new p(a);return await e.load(),e}class h{constructor(e=r.MOBILE.path){Object.defineProperty(this,"session",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"modelPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.modelPath=e}async load(){try{console.log(`Loading ONNX model from ${this.modelPath}...`),console.log("ONNX model loaded successfully")}catch(e){throw console.error("Failed to load ONNX model:",e),e}}async generate(e,t={}){if(!this.session)throw new Error("Model not loaded. Call load() first.");const{maxTokens:n=256,temperature:s=.7,topP:l=.9,stopSequences:u=["</s>",`

`]}=t;try{return console.log("Generating response with ONNX..."),this.simulateResponse(e)}catch(o){throw console.error("ONNX generation failed:",o),o}}async unload(){this.session&&(this.session=null),console.log("ONNX model unloaded")}simulateResponse(e){const t=e.match(/Question: (.+?)(?:\n|$)/),n=t?t[1]:e;return n.toLowerCase().includes("what is")?"Let me explain that concept to you. This is an important topic in your curriculum.":n.toLowerCase().includes("how to")?"Here are the steps to solve this problem: 1) First, understand the question. 2) Identify what you know. 3) Apply the relevant formula or concept.":n.toLowerCase().includes("solve")?"To solve this problem, let's break it down step by step. First, identify the given information, then apply the appropriate method.":"That's a great question! Let me help you understand this better. Can you tell me what you already know about this topic?"}}async function g(a){const e=new h(a);return await e.load(),e}class y{constructor(){Object.defineProperty(this,"model",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isInitialized",{enumerable:!0,configurable:!0,writable:!0,value:!1})}async initialize(){if(this.isInitialized)return;const e=c();try{e==="web"?this.model=await m():this.model=await g(),this.isInitialized=!0}catch(t){throw console.error("Failed to initialize AI model:",t),t}}async chat(e,t){await this.ensureInitialized();const n=this.buildChatPrompt(e,t);return await this.model.generate(n,{maxTokens:256,temperature:.7})}async explain(e,t){await this.ensureInitialized();const n=this.buildExplanationPrompt(e,t);return await this.model.generate(n,{maxTokens:512,temperature:.5})}async solveProblem(e,t){await this.ensureInitialized();const n=this.buildProblemSolvingPrompt(e,t);return await this.model.generate(n,{maxTokens:512,temperature:.3})}async generateQuiz(e,t){await this.ensureInitialized();const n=this.buildQuizPrompt(e,t),s=await this.model.generate(n,{maxTokens:512,temperature:.8});return this.parseQuizResponse(s)}async ensureInitialized(){this.isInitialized||await this.initialize()}buildChatPrompt(e,t){let n=`You are a helpful AI tutor for Indian students. Answer questions clearly and simply.

`;return t&&(n+=`Context from textbook:
${t}

`),n+=`Student: ${e}
Tutor:`,n}buildExplanationPrompt(e,t){return`Explain the concept "${e}" to a Class ${t} student in India. Use simple language and examples from daily life.

Explanation:`}buildProblemSolvingPrompt(e,t){return`Solve this ${t} problem step by step:

${e}

Solution:`}buildQuizPrompt(e,t){return`Generate a ${t} difficulty quiz question about "${e}" with 4 multiple choice options. Format: Question, Option A, Option B, Option C, Option D, Correct Answer, Explanation.

Quiz:`}parseQuizResponse(e){const t=e.split(`
`).filter(n=>n.trim());return{question:t[0]||"Sample question",options:t.slice(1,5)||["A","B","C","D"],correctAnswer:t[5]||"A",explanation:t[6]||"Explanation here"}}async destroy(){this.model&&(await this.model.unload(),this.model=null),this.isInitialized=!1}}let i=null;async function x(){return i||(i=new y,await i.initialize()),i}export{w as D,f as M,S as a,b,v as c,I as d,O as e,x as g};
